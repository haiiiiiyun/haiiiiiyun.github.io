---
title: Linux进程的虚拟地址空间描述
date: 2016-05-19
writing-time: 2016-05-19 13:15--13:45
categories: Programming
tags: C Programming Linux CSAPP
---

通过虚拟内存的概念，操作系统为每一个进程提供完全一致的内存视图，这个内存视图的地址空间，叫虚拟地址空间。

从每个进程的角度来看，内存中只存在操作系统内核及本进程，即内存是被本进程独占的。

![Linux进程虚拟地址空间]({{site.url}}/assets/images/virtual_address_space.png)

从向往上看，分为进程代码和数据区、堆数据区、共享库区、堆栈区、内核内存区。

## 进程代码与数据区

可执行程序文件的内容加载到该区域，该区域又分成2部分，低地址部分包含程序的代码及只读数据，为只读部分;另一区域存放可执行文件的可读写数据，为可
读写区。

该区域不是从0地址开始的，它有一个偏移地址。

## 堆数据区

堆数据区即heap区，在C程序中，该区域的分配和回收由`malloc`和`free`进行。随着区域分配的进行，区域不断从低地址向高地址方向延伸。

## 共享库区

即共享库内存映射区，在C语序中，printf等函数所在库文件的目标代码加载到该区域。

该区域的开始地址是固定的，并向高地址延伸。

## 堆栈区

Stack区，程序运行时，函数调用产生的堆栈存放在该区域。

该区域的开始地址是固定的（紧挨着内核内存区），随着调用函数时堆栈的产生，该区域不断从高地址向低地址方向延伸。

## 内核内存区。

内核虚拟内存区，在虚拟地址空间的最高地址处的一块地址空间内。该区域用户进程不能访问。
